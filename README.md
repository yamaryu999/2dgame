# 2D プラットフォーマーゲーム

HTML5 Canvas + JavaScriptで作成された2Dプラットフォーマーゲームです。モダンなES6+記法を使用し、関数型プログラミングの原則に従って実装されています。

## 🎮 ゲーム概要

プレイヤーキャラクターを操作して、コインを収集しながら敵を避けたり倒したりしてスコアを稼ぐゲームです。

### 主な機能
- **プレイヤー操作**: 左右移動とジャンプ
- **物理演算**: 重力、摩擦、コリジョン検出
- **敵AI**: パトロール移動パターン
- **コイン収集**: スコアシステム
- **パーティクル効果**: 視覚的フィードバック
- **レスポンシブ対応**: デスクトップ・モバイル対応

## 🎯 操作方法

### デスクトップ
- **左右移動**: 矢印キー（←→）または WASD（A/D）
- **ジャンプ**: 矢印キー（↑）または W、スペースキー
- **一時停止**: ESCキー

### モバイル
- **左右移動**: 画面下部の左右ボタン
- **ジャンプ**: 画面下部の上ボタン

## 🏗️ 技術仕様

### フレームワーク・ライブラリ
- **HTML5 Canvas**: ゲーム描画
- **Vanilla JavaScript**: ES6+記法
- **CSS3**: スタイリング・アニメーション

### アーキテクチャ
- **モジュラー設計**: 機能別にクラス分離
- **関数型プログラミング**: 副作用を最小化
- **オブジェクト指向**: 継承とカプセル化

### パフォーマンス
- **60FPS維持**: requestAnimationFrame使用
- **メモリ管理**: デッドエンティティの自動削除
- **最適化**: 効率的なコリジョン検出

## 📁 ファイル構成

```
2daction/
├── index.html          # メインHTMLファイル
├── js/
│   ├── utils.js        # ユーティリティ・ヘルパークラス
│   ├── entities.js     # ゲームエンティティ（プレイヤー、敵、コイン等）
│   └── game.js         # メインゲームクラス
└── README.md           # このファイル
```

## 🚀 セットアップ・実行

### 前提条件
- モダンブラウザ（Chrome、Firefox、Safari、Edge）
- JavaScript有効

### 実行方法
1. ファイルをダウンロードまたはクローン
2. `index.html`をブラウザで開く
3. ゲーム開始！

### ローカルサーバーでの実行（推奨）
```bash
# Python 3の場合
python -m http.server 8000

# Node.jsの場合
npx http-server

# PHPの場合
php -S localhost:8000
```

その後、ブラウザで `http://localhost:8000` にアクセス

## 🎨 ゲーム要素

### プレイヤー
- **移動**: 左右移動、ジャンプ
- **ライフ**: 3回のダメージまで
- **無敵時間**: ダメージ後2秒間
- **アニメーション**: 歩行・ジャンプエフェクト

### 敵
- **AI**: パトロール移動
- **種類**: 基本敵（赤色）
- **倒し方**: 上から踏む
- **ダメージ**: 接触でライフ-1

### プラットフォーム
- **通常**: 茶色の固定プラットフォーム
- **移動**: 自動移動するプラットフォーム
- **破壊可能**: 踏むと壊れるプラットフォーム

### コイン
- **効果**: スコア+10
- **アニメーション**: 回転・スケール効果
- **パーティクル**: 収集時のエフェクト

## 🔧 カスタマイズ

### ゲーム設定の変更
`js/utils.js`の`GAME_CONFIG`と`PHYSICS`定数を編集：

```javascript
const GAME_CONFIG = {
    FPS: 60,
    CANVAS_WIDTH: 800,
    CANVAS_HEIGHT: 600,
    PLAYER_SPEED: 5,
    ENEMY_SPEED: 2
};

const PHYSICS = {
    GRAVITY: 0.8,
    FRICTION: 0.85,
    JUMP_FORCE: -15,
    MAX_FALL_SPEED: 12
};
```

### レベルデザイン
`js/game.js`の`generateLevel()`メソッドを編集して新しいレベルを作成

### 新しいエンティティの追加
`js/entities.js`に新しいクラスを追加

## 🐛 デバッグ機能

- **FPS表示**: 画面左上にFPSカウンター
- **エラーハンドリング**: 詳細なエラーメッセージ
- **コンソールログ**: デバッグ情報の出力

## 📱 レスポンシブ対応

- **タッチ操作**: モバイルデバイス対応
- **画面サイズ**: 800x600固定（必要に応じて変更可能）
- **UI**: スコア・ライフ表示の最適化

## 🔒 エラーハンドリング

- **Canvas対応チェック**: 2Dコンテキストの可用性確認
- **UI要素検証**: 必要なDOM要素の存在確認
- **グローバルエラーキャッチ**: 予期しないエラーの処理
- **ユーザーフレンドリーなエラーメッセージ**: 分かりやすいエラー表示

## 🎵 サウンド（将来実装予定）

現在は簡易版のサウンド管理クラスが実装されています。実際の音声ファイルを追加することで、以下の効果音を実装可能：

- ジャンプ音
- コイン収集音
- 敵撃破音
- ダメージ音
- BGM

## 🤝 貢献

バグ報告や機能提案は歓迎します！

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🎯 今後の拡張予定

- [ ] 複数レベルシステム
- [ ] パワーアップアイテム
- [ ] ボス戦
- [ ] サウンド実装
- [ ] セーブ機能
- [ ] リーダーボード
- [ ] カスタムキャラクター
- [ ] レベルエディター

---

**楽しんでプレイしてください！** 🎮✨
